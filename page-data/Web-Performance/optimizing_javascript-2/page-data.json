{"componentChunkName":"component---src-templates-blog-post-js","path":"/Web-Performance/optimizing_javascript-2/","result":{"data":{"site":{"siteMetadata":{"title":"서지환의 블로그","author":"[Ji hwan]","siteUrl":"https://seojihwan.github.io","comment":{"disqusShortName":"https-seojihwan-github-io","utterances":"seojihwan/seojihwan.github.io"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"9c6ba365-0a9b-52b9-adab-a90f2e28d6db","excerpt":"Reduce JavaScript payloads with code splitting 어플리케이션을 로드했을때 필요한 초기 route에 관련한 코드만 보내기 위해 자바스크립트 번들을 분리해라 위의 예시에서 moduleA는 someFunction에서만 사용된다고 가정하자. 그렇다면 위와 같이 dyanamic import를 적용하고 폼이 전송될 때 moduleA를 fetch 해오게 된다. 콘솔로 찍어보면 promise 객체가 전달되고, Module객체를 resolve…","html":"<h3 id=\"reduce-javascript-payloads-with-code-splitting\" style=\"position:relative;\"><a href=\"#reduce-javascript-payloads-with-code-splitting\" aria-label=\"reduce javascript payloads with code splitting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reduce JavaScript payloads with code splitting</h3>\n<p>어플리케이션을 로드했을때 필요한 초기 route에 관련한 코드만 보내기 위해 자바스크립트 번들을 분리해라</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> moduleA <span class=\"token keyword\">from</span> <span class=\"token string\">\"library\"</span><span class=\"token punctuation\">;</span>\n\nform<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"submit\"</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">someFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">someFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// uses moduleA</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위의 예시에서 moduleA는 someFunction에서만 사용된다고 가정하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">form<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"submit\"</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'library.moduleA'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">module</span> <span class=\"token operator\">=></span> module<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">)</span> <span class=\"token comment\">// using the default export</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token function\">someFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token function\">handleError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">someFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// uses moduleA</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그렇다면 위와 같이 dyanamic import를 적용하고 폼이 전송될 때 moduleA를 fetch 해오게 된다. 콘솔로 찍어보면 promise 객체가 전달되고, Module객체를 resolve하는 것을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAvElEQVQY042Py67DIBBD8/+/2GVTCCHJhNcwAwyUdnXvrkeWF5Ysy4vWSumXD+66TqUUABzHobV2tzu/WGu3bTPGFKKiFa1rPewFcXeyZCTz2OF5exNmEzHFGLhwk/ZBWm2VmUtrYwwpRYh6rU16k7F06clg2jEDpRPpJvZMjqd/EouUmIPn9cnqxTGNPywYMR3IsWTIeOYcyHt24KSJ1K/mRO/CPGeHyL/y/BZNIs9hi3FP0eEFGW4YP/AG4rwgSbKFHxEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"module_object\"\n        title=\"module_object\"\n        src=\"/static/7b51d532e1c2e674d3c17dee0ebbee7a/13ae7/module_object.png\"\n        srcset=\"/static/7b51d532e1c2e674d3c17dee0ebbee7a/5a46d/module_object.png 300w,\n/static/7b51d532e1c2e674d3c17dee0ebbee7a/13ae7/module_object.png 350w\"\n        sizes=\"(max-width: 350px) 100vw, 350px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>lazyload로 불러오기 이전 network탭\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 894px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAeklEQVQI12WMywoDIQxF/f9/67YLoSCFQdRRJz5iqzPD3ApdlJ5FSE5yI7TWRJQnpZQYozHGe79MlFLYQsK4D/axPCnlzky0CWttCGGM0XtHZeaUUq0V1/gipWytwSMPvzp333Su9bbq8h4CmfOXY/LfgP07Un/tx3kBTMmrEJ5ESPkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"before_lazyload\"\n        title=\"before_lazyload\"\n        src=\"/static/f1f9d8d1c55a2c01678890fb7748db47/38af3/before_lazyload.png\"\n        srcset=\"/static/f1f9d8d1c55a2c01678890fb7748db47/5a46d/before_lazyload.png 300w,\n/static/f1f9d8d1c55a2c01678890fb7748db47/0a47e/before_lazyload.png 600w,\n/static/f1f9d8d1c55a2c01678890fb7748db47/38af3/before_lazyload.png 894w\"\n        sizes=\"(max-width: 894px) 100vw, 894px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>lazyload로 불러온 후 network탭\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 933px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAV0lEQVQI1zWMWwrAIAwEe/+LGhUTEeOzShel8xGGsLsPEYnIGKMfIKWUGCPcWptzds6FEG6g1grvrZH3LPFBE9+11vuDnKpCmHnOaYzByt57HlJK92rKH0RncrXfmqDeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"after_lazyload\"\n        title=\"after_lazyload\"\n        src=\"/static/0565b009c8ac540ab2fd163124bd756e/dc616/after_lazyload.png\"\n        srcset=\"/static/0565b009c8ac540ab2fd163124bd756e/5a46d/after_lazyload.png 300w,\n/static/0565b009c8ac540ab2fd163124bd756e/0a47e/after_lazyload.png 600w,\n/static/0565b009c8ac540ab2fd163124bd756e/dc616/after_lazyload.png 933w\"\n        sizes=\"(max-width: 933px) 100vw, 933px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n초기에 불러오지 않는 것을 확인할 수 있다. (lazy load)</p>\n<p>하지만 lazy loading된 리소스가 너무 큰 경우엔 사용감이 떨어질 수도 있고, 사용자의 네트워크 환경이 원활해야한다 등등 여러 제약 조건도 발생한다. 상황에 맞게 잘 활용하면 좋은 웹앱 성능을 만들 수 있을것 같다.</p>\n<p>출처:\n<a href=\"https://web.dev/reduce-javascript-payloads-with-code-splitting/\">https://web.dev/reduce-javascript-payloads-with-code-splitting/</a></p>","frontmatter":{"title":"[Performance] Optimizing javascript - (2)","date":"February 15, 2021"}}},"pageContext":{"slug":"/Web-Performance/optimizing_javascript-2/","previous":{"fields":{"slug":"/Web-Performance/optimizing_javascript-1/"},"frontmatter":{"title":"[Performance] Optimizing javascript - (1)","category":"Web-Performance","draft":false}},"next":{"fields":{"slug":"/woowa-course/review-1/"},"frontmatter":{"title":"[woowa-course] 리뷰 피드백 정리 - (1)","category":"woowa-course","draft":false}}}}}