{"componentChunkName":"component---src-templates-blog-post-js","path":"/JS/woowahan_tech_learning/WTL-4-1/","result":{"data":{"site":{"siteMetadata":{"title":"서지환의 블로그","author":"[Ji hwan]","siteUrl":"https://seojihwan.github.io","comment":{"disqusShortName":"https-seojihwan-github-io","utterances":"seojihwan/seojihwan.github.io"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"f8d5151e-0524-53da-902a-7cbf3261703c","excerpt":"https://codesandbox.io/s/ordermonitor04-forked-4qmnb?file=/src/containers/MonitorController.tsx\n 저번시간에 이어서 container 컴포넌트를 살펴보자 MonitorController.tsx MonitorController는 React.PureComponent를 상속받는다.\nPureComponent라는 건 하는 컴포넌트이다.\n잘 알고 있는 순수함수와 같다. 컴포넌트는 Generic 인자로 P(props), S(state…","html":"<p><a href=\"https://codesandbox.io/s/ordermonitor04-forked-4qmnb?file=/src/containers/MonitorController.tsx\">https://codesandbox.io/s/ordermonitor04-forked-4qmnb?file=/src/containers/MonitorController.tsx</a>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 264px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 297.7272727272727%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"directory3-2\"\n        title=\"directory3-2\"\n        src=\"/static/2967973443756b55db244a50214f9f18/e61aa/directory3-2.png\"\n        srcset=\"/static/2967973443756b55db244a50214f9f18/e61aa/directory3-2.png 264w\"\n        sizes=\"(max-width: 264px) 100vw, 264px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>저번시간에 이어서 container 컴포넌트를 살펴보자</p>\n<p>MonitorController.tsx</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Dispatch <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"redux\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> connect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-redux\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> StoreState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../types\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> startMonitoring<span class=\"token punctuation\">,</span> stopMonitoring <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../actions\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PlayButton <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">MonitorControllerProps</span> <span class=\"token punctuation\">{</span>\n  monitoring<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapStateToProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token operator\">:</span> StoreState</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    monitoring<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>monitoring\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapDispatchToProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch<span class=\"token operator\">:</span> Dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">onStart</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">startMonitoring</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">onStop</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">stopMonitoring</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MonitorController</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>PureComponent</span><span class=\"token operator\">&lt;</span>MonitorControllerProps<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>PlayButton\n          monitoring<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>monitoring<span class=\"token punctuation\">}</span>\n          onPlay<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>onStart<span class=\"token punctuation\">}</span>\n          onPause<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>onStop<span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> MonitorControllerContainer <span class=\"token operator\">=</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n  mapStateToProps<span class=\"token punctuation\">,</span>\n  mapDispatchToProps\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>MonitorController<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>MonitorController는 React.PureComponent를 상속받는다.\nPureComponent라는 건 <code class=\"language-text\">동일한 입력에 대해 동일한 결과를 반환</code>하는 컴포넌트이다.\n잘 알고 있는 순수함수와 같다.</p>\n<p>컴포넌트는 Generic 인자로 P(props), S(state), SS(snapshot)을 받는다.</p>\n<p>SS는 잘몰랐지만 찾아보니 업데이트 이전의 render 정보(ex 스크롤위치)를 얻는 데 사용된다고 한다.\n<a href=\"https://stackoverflow.com/questions/57059348/what-does-ss-stand-for-in-a-react-component-declaration\">what is SS</a></p>\n<p><a href=\"https://react-redux.js.org/using-react-redux/connect-mapstate\">react-redux</a></p>\n<h4 id=\"mapstatetoprops\" style=\"position:relative;\"><a href=\"#mapstatetoprops\" aria-label=\"mapstatetoprops permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mapStateToProps</h4>\n<p>저장소의 state를 인자로 받고, 반환하는 object를 props로 컴포넌트에 전달한다..\n스토어가 변경될 때 마다 실행된다.</p>\n<p>반환 되는 object의 contents가 바뀔 때만 컴포넌트가 re-render된다.\n이 부분을 잘 살펴보면 “shallow equality” check라고 쓰여있다.\n즉 object의 reference만 비교할 뿐이지, 실제 내부의 value를 비교하지 않는다.</p>\n<h4 id=\"mapdispatchtoprops\" style=\"position:relative;\"><a href=\"#mapdispatchtoprops\" aria-label=\"mapdispatchtoprops permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mapDispatchToProps</h4>\n<p>redux의 dispatch를 인자로 받고, 특정 액션에 대한 dispatch를 실행하는 함수를 반환하고 컴포넌트의 props로 전달한다.</p>\n<h4 id=\"connect-react-redux\" style=\"position:relative;\"><a href=\"#connect-react-redux\" aria-label=\"connect react redux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>connect: (react-redux)</h4>\n<p>Provider => subscribe의 역할, store가 변하면 하위 컴포넌트에 데이터를 보내줌\n명시적으로 어떤 컴포넌트가 어떤 데이터를 받을지를 connect를 사용 가능(모든 컴포넌트의 상태가 다 바뀌지 않도록)</p>\n<p>connect 는 high order 함수\nmapStateToProps,mapDispatchToProps 라는 함수를 통해 필요로 하는 state, dispatch를 뽑아서 반환하고 connect 함수를 통해 컴포넌트에 주입 </p>\n<p>그 다음 그 반환 값을 export하면 state와 dispatch를 실행하는 함수가 props로 주입된 component를 사용할 수 있다.</p>\n<p>단점: 코드의 반복이 불가피, 보일러 플레이트가 많다\n대안 => react-redux에서도 useSelector, useDispatch훅을 지원한다.</p>\n<p>MonitorController컨테이너의 자식 컴포넌트인 PlayButton을 보자</p>\n<p>PlayButton.tsx</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Button <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"antd\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">PlayButtonProps</span> <span class=\"token punctuation\">{</span>\n  monitoring<span class=\"token operator\">:</span> boolean<span class=\"token punctuation\">;</span>\n  onPlay<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  onPause<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> PlayButton<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token constant\">FC</span><span class=\"token operator\">&lt;</span>PlayButtonProps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n  monitoring<span class=\"token punctuation\">,</span>\n  onPause<span class=\"token punctuation\">,</span>\n  onPlay\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> renderIcon <span class=\"token operator\">=</span> monitoring <span class=\"token operator\">?</span> <span class=\"token string\">\"pause\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"caret-right\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Button\n      style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> marginTop<span class=\"token operator\">:</span> <span class=\"token number\">20</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      shape<span class=\"token operator\">=</span><span class=\"token string\">\"circle\"</span>\n      icon<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>renderIcon<span class=\"token punctuation\">}</span>\n      onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>monitoring<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          onPause <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">onPause</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          onPlay <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">onPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>PlayButton컴포넌트는 props로 전달받은 monitoring, onpause, onPlay를 사용하고 있다.\nisPlay라는 상태값과 토글을 이용하여 버튼의 아이콘과 눌렀을 때의 콜백함수를 바꾸어 주고있다.</p>\n<p>버튼을 누르게 되면, monitoring 값에 따라 onPause() 또는 onPlay()함수가 호출된다.\n이 함수는 dispatch를 호출하고, 액션은 리듀서로 전달된다.</p>\n<p>reducer</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    <span class=\"token keyword\">case</span> <span class=\"token function\">getType</span><span class=\"token punctuation\">(</span>Actions<span class=\"token punctuation\">.</span>startMonitoring<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        monitoring<span class=\"token operator\">:</span> <span class=\"token operator\">!</span>state<span class=\"token punctuation\">.</span>monitoring\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token function\">getType</span><span class=\"token punctuation\">(</span>Actions<span class=\"token punctuation\">.</span>stopMonitoring<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        monitoring<span class=\"token operator\">:</span> <span class=\"token operator\">!</span>state<span class=\"token punctuation\">.</span>monitoring\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>monitoring action이 들어오면 monitoring값을 토글시킨다.</p>\n<p>Saga</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span><span class=\"token operator\">*</span> <span class=\"token function\">monitoringWorkflow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">yield</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span>Actions<span class=\"token punctuation\">.</span>startMonitoring<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> loop <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>loop<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">yield</span> <span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token function\">getType</span><span class=\"token punctuation\">(</span>Actions<span class=\"token punctuation\">.</span>fetchSuccess<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token function\">getType</span><span class=\"token punctuation\">(</span>Actions<span class=\"token punctuation\">.</span>fetchFailure<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> stoped <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">yield</span> <span class=\"token function\">race</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        waitting<span class=\"token operator\">:</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        stoped<span class=\"token operator\">:</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span>Actions<span class=\"token punctuation\">.</span>stopMonitoring<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>stoped<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        loop <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>또한 Redux-Saga에서는\nyield take(getType(Actions.startMonitoring))를 통해\nstartMonitoring액션을 대기하고 액션의 흐름을 유지해준다.  </p>\n<p>위의 monitoringWorkflow에서는 startMonitoring과 race에서만 blocking이 발생한다.\nRedux-Saga는 flow를 통해 반복적인 작업(버튼클릭) 관리, Side effects 처리에 있어 유리하다.</p>\n<h4 id=\"typescript-interface-type-차이\" style=\"position:relative;\"><a href=\"#typescript-interface-type-%EC%B0%A8%EC%9D%B4\" aria-label=\"typescript interface type 차이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[TypeScript] interface, type 차이</h4>\n<p>interface는 새로운 필드를 추가할 수 있지만, type은 변경 불가능 하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">ex1</span><span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">ex1</span><span class=\"token punctuation\">{</span>\n    budget<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> man<span class=\"token operator\">:</span> ex1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'jeff'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token operator\">:</span> <span class=\"token number\">55</span><span class=\"token punctuation\">,</span>\n    budget<span class=\"token operator\">:</span> <span class=\"token number\">10000</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> ex1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> ex1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    budget<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Duplicate identifier 'ex1'.</span></code></pre></div>\n<p>type은 interface와 달리 computed property를 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> Keys <span class=\"token operator\">=</span> <span class=\"token string\">\"firstname\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"subname\"</span>\n\n<span class=\"token keyword\">type</span> name <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>key <span class=\"token keyword\">in</span> Keys<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> man<span class=\"token operator\">:</span> name <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  firstname<span class=\"token operator\">:</span> <span class=\"token string\">\"Seo\"</span><span class=\"token punctuation\">,</span>\n  subname<span class=\"token operator\">:</span> <span class=\"token string\">\"jihwan\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"generic\" style=\"position:relative;\"><a href=\"#generic\" aria-label=\"generic permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>generic</h4>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> identity<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>arg<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> arg<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">GenericIdentityFn</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>arg<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> identity<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>arg<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> arg<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> myIdentity<span class=\"token operator\">:</span> GenericIdentityFn <span class=\"token operator\">=</span> identity<span class=\"token punctuation\">;</span></code></pre></div>\n<p>generic을 이용하면 임의의 문자를 &#x3C;>사이에 넣어 해당 문자를 임의의 같은 타입으로 동적 설정이 가능하다</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> loggingIdentity<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>arg<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Property 'length' does not exist on type 'T'.</span>\n  <span class=\"token keyword\">return</span> arg<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>length 라는 method는 Array에만 존재하기 때문에 보장 해줄수 없기 때문에 위와 같은 메시지가 나오게 된다.</p>","frontmatter":{"title":"[JS] 우아한 테크 러닝 4주차 - (1)","date":"October 06, 2020"}}},"pageContext":{"slug":"/JS/woowahan_tech_learning/WTL-4-1/","previous":{"fields":{"slug":"/JS/woowahan_tech_learning/WTL-3-1/"},"frontmatter":{"title":"[JS] 우아한 테크 러닝 3주차 - (1)","category":"JS","draft":false}},"next":null}}}